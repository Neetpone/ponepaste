function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=a(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){l=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(t,e){if(t){if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(r=n.key,o=void 0,o=function(t,e){if("object"!==i(t)||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var n=a.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(r,"string"),"symbol"===i(o)?o:String(o)),n)}var r,o}function s(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}var l,c=function(t){return document.querySelector(t)},d=function(t){return document.querySelectorAll(t)||[]},u=function(t){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild},h=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},p=function(t){t.classList.contains("is-hidden")?t.classList.remove("is-hidden"):t.classList.add("is-hidden")},f=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},v=function(){function t(e){r(this,t),this.element=e}return s(t,[{key:"attach",value:function(t){this.element.addEventListener("click",(function(e){e.target&&e.target.classList.contains("paginator__button")&&t(+e.target.dataset.page)}))}},{key:"update",value:function(t,e,a){h(this.element);var n=Math.floor(t/e);if(0!==n){var i=a-2<0?0:a-2,r=a+2>n?n:a+2,o=Math.abs(0-a)>2,s=Math.abs(n-a)>2,l=0===a?"disabled":"";this.element.appendChild(u('<button class="paginator__button previous" '.concat(l,' data-page="').concat(a-1,'">Previous</button>'))),o&&(this.element.appendChild(u('<button class="paginator__button" data-page="'.concat(0,'">').concat(0,"</button>"))),this.element.appendChild(u('<span class="ellipsis">…</span>')));for(var c=i;c<=r;c++){var d=c===a?"paginator__button--selected":"";this.element.appendChild(u('<button class="paginator__button '.concat(d,'" data-page="').concat(c,'">').concat(c,"</button>")))}s&&(this.element.appendChild(u('<span class="ellipsis">…</span>')),this.element.appendChild(u('<button class="paginator__button" data-page="'.concat(n,'">').concat(n,"</button>"))));var p=a===n?"disabled":"";this.element.appendChild(u('<button class="paginator__button next" '.concat(p,' data-page="').concat(a+1,'">Next</button>')))}}}]),t}(),g=function(){function a(t,e){r(this,a),this.element=t,this.container=t.parentElement,this.options=e,this.ajaxCallback=e.ajaxCallback,this.data=[],this.unfilteredData=[],this.totalRecords=-1,this.perPage=20,this.currentPage=0,this.paginator=new v(this.container.querySelector(".paginator")),this.filterCallback=e.filterCallback,this.sortField=null,this.sortDir=!0}return s(a,[{key:"attach",value:function(){var t=this;this.filterField=this.container.querySelector("input.search"),this.filterField&&this.filterCallback&&(this.filterField.addEventListener("keyup",(function(e){e.target&&t._updateFilter(e.target.value)})),this.options.preFilter&&(this.filterField.value=this.options.preFilter)),this.perPageField=this.container.querySelector("select[name=per_page]"),this.perPageField&&this.perPageField.addEventListener("change",(function(e){t.perPage=Number(e.target.value),t._updatePage(0)}));var e=this.element.querySelector("tr.paginator__sort");e&&e.addEventListener("click",(function(e){var a=e.target;if(a.dataset.sortField){if(t.sortField){var n=t.element.querySelector("th[data-sort-field=".concat(t.sortField,"]"));n.classList.remove("paginator__sort--down"),n.classList.remove("paginator__sort--up")}t._updateSort(a.dataset.sortField,!t.sortDir),a.classList.add(t.sortDir?"paginator__sort--up":"paginator__sort--down")}})),this.paginator.attach(this._updatePage.bind(this)),this._loadEntries()}},{key:"_loadEntries",value:function(){var t=this;new Promise(this.ajaxCallback).then((function(e){t.element.classList.remove("hidden"),t.unfilteredData=e.data,t._updateFilter(t.options.preFilter)}))}},{key:"_updateEntries",value:function(t){this.data=t,this.totalRecords=this.data.length;var e=this.element.querySelector("tbody");h(e);for(var a=this.perPage*this.currentPage,n=a+this.perPage>this.totalRecords?this.totalRecords:a+this.perPage,i=a;i<n;i++){var r=u(this.options.rowCallback(this.data[i]));r.classList.add(i%2==0?"odd":"even"),e.appendChild(r)}this.paginator.update(this.totalRecords,this.perPage,this.currentPage)}},{key:"_updatePage",value:function(t){this.currentPage=t,this.paginator.update(this.totalRecords,this.perPage,this.currentPage),this._updateEntries(this.data)}},{key:"_updateFilter",value:function(t){if(null!==t&&""!==t){var a,n=[],i=e(this.unfilteredData);try{for(i.s();!(a=i.n()).done;){var r=a.value;this.filterCallback(r,t)&&n.push(r)}}catch(t){i.e(t)}finally{i.f()}this._updatePage(0),this._updateEntries(n)}else this._updateEntries(this.unfilteredData)}},{key:"_updateSort",value:function(e,a){this.sortField=e,this.sortDir=a;var n=t(this.data).sort((function(t,n){var i=0;return t[e]>n[e]?i=1:t[e]<n[e]&&(i=-1),a||(i=-i),i}));this._updatePage(0),this._updateEntries(n)}}]),a}(),m=function(t,a){if(!a)return!0;var n=a.toLowerCase();if("untagged"===n&&0===t.tags.length)return!0;if(-1!==t.title.toLowerCase().indexOf(n))return!0;if(-1!==t.author.toLowerCase().indexOf(n))return!0;var i,r=e(t.tags);try{for(r.s();!(i=r.n()).done;){if(-1!==i.value.name.toLowerCase().indexOf(n))return!0}}catch(t){r.e(t)}finally{r.f()}return!1},y=function(t){return t.map((function(t){var e,a=t.name.toLowerCase();return e="nsfw"===a||"explicit"===a?"is-danger":"safe"===a?"is-success":"/"===a.charAt(0)&&"/"===a.charAt(a.length-1)?"is-primary":"is-info",'<a href="/archive?q='.concat(t.slug,'">\n                            <span class="tag ').concat(e,'">').concat(f(t.name),"</span>\n                        </a>")})).join("")},b=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),this.element=e,this.tags=[],this.options=a,this.maxTags=a.maxTags||32,this.inputNode=null,this.containerNode=null}return s(t,[{key:"attach",value:function(){var t=this;if(this.element.style.display="none",this.containerNode=u('<div class="tags-input"></div>'),this.inputNode=u('<input class="input" type="text" placeholder="Type a comma to separate each tag..." value="" />'),this.containerNode.appendChild(this.inputNode),this.element.parentNode.insertBefore(this.containerNode,this.element.nextSibling),this.element.value){var a,n=e(this.element.value.split(","));try{for(n.s();!(a=n.n()).done;){var i=a.value;this.addTag(i)}}catch(t){n.e(t)}finally{n.f()}}this.containerNode.addEventListener("keydown",this._handleInputKeyUp.bind(this)),this.containerNode.addEventListener("click",this._handleContainerClick.bind(this)),this.inputNode.addEventListener("focusout",(function(e){t.inputNode.value&&(t.addTag(t.inputNode.value),t.inputNode.value="",t.updateHiddenInputValue())}))}},{key:"detach",value:function(){this.tags.clear(),this.containerNode.remove(),this.element.style.display="inline-block"}},{key:"updateHiddenInputValue",value:function(){this.element.value=this.tags.join(",")}},{key:"deleteTagNode",value:function(t){this.tags.splice(this.tags.indexOf(t.dataset.value.toLowerCase()),1),t.remove(),this.tags.length<this.maxTags&&(this.inputNode.disabled=!1)}},{key:"addTag",value:function(t){""!==(t=t.trim())&&-1===this.tags.indexOf(t.toLowerCase())&&(this.tags.push(t.toLowerCase()),this.inputNode.parentNode.insertBefore(u('<span class="tag is-info" data-value="'+f(t)+'">'+f(t)+'<span class="delete is-small" /></span>'),this.inputNode),this.tags.length>=this.maxTags&&(this.inputNode.disabled=!0))}},{key:"_handleInputKeyUp",value:function(t){var e=this.inputNode.value;"Backspace"===t.key&&""===e?this.inputNode.previousSibling&&(this.deleteTagNode(this.inputNode.previousSibling),this.updateHiddenInputValue()):","===t.key?(this.addTag(e),this.inputNode.value="",this.updateHiddenInputValue(),t.preventDefault()):"Backspace"!==t.key&&e.length>255&&t.preventDefault()}},{key:"_handleContainerClick",value:function(t){t.target&&t.target.classList.contains("delete")&&(this.deleteTagNode(t.target.closest(".tag")),this.updateHiddenInputValue())}}]),t}(),k=function(){var e;Array.prototype.forEach.call(d(".js-tag-input"),(function(t){new b(t).attach()})),(e=c('[data-target~="#signin"],[data-target~="#signup"]'))&&(e.href="javascript:void(0)",e.addEventListener("click",(function(){c(".modal").classList.add("is-active")})),c(".modal-button-close").addEventListener("click",(function(){c(".modal").classList.remove("is-active")})));var a=c(".panel-tools .embed-tool");a&&a.addEventListener("click",(function(t){t.target&&t.target.closest(".panel-tools")&&p(t.target.closest(".panel-tools").querySelector(".panel-embed"))}));var n=c(".expand-tool");n&&n.addEventListener("click",(function(t){if(t.target&&t.target.closest(".panel")){var e=t.target.closest(".panel");e.classList.contains("panel-fullsize")?e.classList.remove("panel-fullsize"):e.classList.add("panel-fullsize")}})),(document.querySelectorAll(".notification .delete")||[]).forEach((function(t){var e=t.parentNode;t.addEventListener("click",(function(){e.parentNode.removeChild(e)}))}));var i=Array.prototype.slice.call(document.querySelectorAll(".navbar-burger"),0);i.length>0&&i.forEach((function(t){t.addEventListener("click",(function(){var e=t.dataset.target,a=document.getElementById(e);t.classList.toggle("is-active"),a.classList.toggle("is-active")}))}));var r=c(".captcha_container");if(r){var o=r.querySelector("a"),s=r.querySelector("img");o&&s&&o.addEventListener("click",(function(){var t=s.src;-1!==t.indexOf("&refresh")?t=t.split("&rand=")[0]:t+="&refresh",s.src=t+"&rand="+Math.random()}))}var l=d(".js-hidden");l&&Array.prototype.forEach.call(l,(function(t){p(t)}));var u=d("[data-encoded-text]");u&&t(u).forEach((function(t){var e,a,n,i;(e=t.dataset.encodedText,a=Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)})),n=new DecompressionStream("gzip"),i=n.writable.getWriter(),i.write(a),i.close(),new Response(n.readable).arrayBuffer().then((function(t){return(new TextDecoder).decode(t)}))).then((function(e){setTimeout((function(){return t[t.dataset.encodedAttr]=e}),1500)}))}))},_=function(t){return t.dataset.pasteInfo?JSON.parse(t.dataset.pasteInfo):null};l=function(){k();var t=new URLSearchParams(window.location.search).get("q"),e=document.getElementById("archive"),a="/api/user_pastes.php?user_id="+e.dataset.userId;new g(e,{ajaxCallback:function(t){fetch(a).then((function(t){return t.json()})).then(t)},rowCallback:function(t){var e,a=(e=document.getElementById("js-data-holder"))?{userId:e.dataset.userId,csrfToken:e.dataset.csrfToken}:{userId:null,csrfToken:null},n=parseInt(t.author_id)===parseInt(a.userId),i=n?'<td class="td-center">\n                                         <form action="/'.concat(t.id,'" method="POST">\n                                            <input type="hidden" name="delete" value="delete" />\n                                            <input type="hidden" name="csrf_token" value="').concat(a.csrfToken,'" />\n                                            <input type="submit" value="Delete" />\n                                         </form>\n                                       </td>'):"",r=new Date(t.created_at).toLocaleString(),o=n?'<td class="td-center">'.concat(["Public","Unlisted","Private"][t.visibility],"</td>"):"";return'<tr>\n                        <td><a href="/'.concat(t.id,'">').concat(f(t.title),'</a></td>\n                        <td class="td-center">').concat(r,"</td>\n                        ").concat(o,'\n                        <td class="td-center">').concat(t.views||0,"</td>\n                        <td>").concat(y(t.tags),"</td>\n                        ").concat(i,"\n                    </tr>")},filterCallback:m,preFilter:t}).attach();var n=document.getElementById("favs");n&&new g(n,{ajaxCallback:function(t){t({data:Array.prototype.map.call(n.querySelectorAll("tbody > tr"),_)})},rowCallback:function(t){var e=t.recently_updated?"<i class='far fa-check-square fa-lg' aria-hidden='true'></i>":"<i class='far fa-minus-square fa-lg' aria-hidden='true'></i>",a=new Date(t.favourited_at).toLocaleString();return'<tr>\n                        <td><a href="/'.concat(t.id,'">').concat(f(t.title),'</a></td>\n                        <td class="td-center">').concat(a,'</td>\n                        <td class="td-center">').concat(e,"</td>\n                        <td>").concat(y(t.tags),"</td>\n                    </tr>")},filterCallback:m}).attach()},"loading"!==document.readyState?l():document.addEventListener("DOMContentLoaded",l);
//# sourceMappingURL=user_profile.min.js.map
