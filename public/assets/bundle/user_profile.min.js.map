{"version":3,"file":"user_profile.min.js","sources":["../../js/dom.js","../../js/data_tables.js","../../js/utils.js","../../js/tag_input.js","../../js/main.js","../../js/user_profile.js"],"sourcesContent":["const $ = function(selector) {\n    return document.querySelector(selector);\n};\n\nconst $$ = function(selector) {\n    return document.querySelectorAll(selector) || [];\n};\n\nconst makeEl = function(html) {\n    const template = document.createElement('template');\n\n    template.innerHTML = html.trim();\n\n    return template.content.firstChild;\n};\n\nconst clearEl = function(el) {\n    while (el.firstChild) {\n        el.removeChild(el.firstChild);\n    }\n};\n\nconst toggleEl = function(el) {\n    if (el.classList.contains('is-hidden')) {\n        el.classList.remove('is-hidden');\n    } else {\n        el.classList.add('is-hidden');\n    }\n};\n\nconst escape = function(unsafe) {\n    return unsafe\n        .replace(/&/g, \"&amp;\")\n        .replace(/</g, \"&lt;\")\n        .replace(/>/g, \"&gt;\")\n        .replace(/\"/g, \"&quot;\")\n        .replace(/'/g, \"&#039;\");\n}\n\nconst whenReady = function(funcp) {\n    if (document.readyState !== 'loading') {\n        funcp();\n    } else {\n        document.addEventListener('DOMContentLoaded', funcp);\n    }\n}\n\nexport { whenReady, $, $$, makeEl, clearEl, toggleEl, escape };","import { makeEl, clearEl } from \"./dom\";\n\nclass SimplePaginator {\n    constructor(element) {\n        this.element = element;\n    }\n\n    attach(pageCallback) {\n        this.element.addEventListener('click', evt => {\n            if (evt.target && evt.target.classList.contains('paginator__button')) {\n                pageCallback(+evt.target.dataset.page);\n            }\n        });\n    }\n\n    update(totalRecords, perPage, currentPage) {\n        clearEl(this.element);\n\n        /* First and last page in existence */\n        const firstPage = 0;\n        const lastPage = Math.floor(totalRecords / perPage); // ish?\n        const numPagesToShow = 2;\n\n        if (lastPage === firstPage) {\n            return;\n        }\n\n        /* First and last page the main paginator will show */\n        const firstPageShow = (currentPage - numPagesToShow) < firstPage ? firstPage : (currentPage - numPagesToShow);\n        const lastPageShow = (currentPage + numPagesToShow) > lastPage ? lastPage : (currentPage + numPagesToShow);\n\n        /* Whether to show the first and last pages in existence at the ends of the paginator */\n        const showFirstPage = (Math.abs(firstPage - currentPage)) > (numPagesToShow);\n        const showLastPage = (Math.abs(lastPage - currentPage)) > (numPagesToShow);\n\n\n        const prevButtonDisabled = currentPage === firstPage ? 'disabled' : ''\n\n        /* Previous button */\n        this.element.appendChild(makeEl(\n            `<button class=\"paginator__button previous\" ${prevButtonDisabled} data-page=\"${currentPage - 1}\">Previous</button>`\n        ));\n\n        /* First page button */\n        if (showFirstPage) {\n            this.element.appendChild(makeEl(\n                `<button class=\"paginator__button\" data-page=\"${firstPage}\">${firstPage}</button>`\n            ));\n            this.element.appendChild(makeEl(`<span class=\"ellipsis\">…</span>`));\n        }\n\n        /* \"window\" buttons */\n        for (let i = firstPageShow; i <= lastPageShow; i++) {\n            const selected = (i === currentPage ? 'paginator__button--selected' : '');\n            this.element.appendChild(makeEl(\n                `<button class=\"paginator__button ${selected}\" data-page=\"${i}\">${i}</button>`\n            ));\n        }\n\n        /* Last page button */\n        if (showLastPage) {\n            this.element.appendChild(makeEl(`<span class=\"ellipsis\">…</span>`));\n            this.element.appendChild(makeEl(\n                `<button class=\"paginator__button\" data-page=\"${lastPage}\">${lastPage}</button>`\n            ));\n        }\n\n        const nextButtonDisabled = currentPage === lastPage ? 'disabled' : ''\n        /* Next button */\n        this.element.appendChild(makeEl(\n            `<button class=\"paginator__button next\" ${nextButtonDisabled} data-page=\"${currentPage + 1}\">Next</button>`\n        ));\n    }\n}\n\nclass DataTable {\n    constructor(element, options) {\n        this.element = element;\n        this.container = element.parentElement;\n        this.options = options;\n\n        this.ajaxCallback = options.ajaxCallback;\n        this.data = [];\n        this.unfilteredData = [];\n\n        this.totalRecords = -1;\n        this.perPage = 20;\n        this.currentPage = 0;\n\n        this.paginator = new SimplePaginator(this.container.querySelector('.paginator'));\n\n        this.filterCallback = options.filterCallback;\n        this.sortField = null;\n        this.sortDir = true;\n    }\n\n    attach() {\n        this.filterField = this.container.querySelector('input.search');\n        if (this.filterField && this.filterCallback) {\n            this.filterField.addEventListener('keyup', evt => {\n               if (evt.target) {\n                   this._updateFilter(evt.target.value);\n               }\n            });\n\n            if (this.options.preFilter) {\n                this.filterField.value = this.options.preFilter;\n            }\n        }\n\n        this.perPageField = this.container.querySelector('select[name=per_page]');\n\n        if (this.perPageField) {\n            this.perPageField.addEventListener('change', evt => {\n               this.perPage = Number(evt.target.value);\n               this._updatePage(0);\n            });\n        }\n\n        const header = this.element.querySelector('tr.paginator__sort');\n\n        if (header) {\n            header.addEventListener('click', evt => {\n                const target = evt.target;\n\n                if (!target.dataset.sortField) {\n                    return;\n                }\n\n                if (this.sortField) {\n                    const elem = this.element.querySelector(`th[data-sort-field=${this.sortField}]`)\n                    elem.classList.remove('paginator__sort--down');\n                    elem.classList.remove('paginator__sort--up');\n                }\n\n                this._updateSort(target.dataset.sortField, !this.sortDir);\n\n                target.classList.add(this.sortDir ? 'paginator__sort--up' : 'paginator__sort--down');\n            });\n        }\n\n        this.paginator.attach(this._updatePage.bind(this));\n        this._loadEntries();\n    }\n\n    /* Load the requested data from the server, and when done, update the DOM. */\n    _loadEntries() {\n        new Promise(this.ajaxCallback)\n            .then(data => {\n                this.element.classList.remove('hidden');\n                this.unfilteredData = data.data;\n                this._updateFilter(this.options.preFilter);\n            });\n    }\n\n    /* Update the DOM to reflect the current state of the data we have loaded */\n    _updateEntries(data) {\n        this.data = data;\n        this.totalRecords = this.data.length;\n\n        const bodyElement = this.element.querySelector('tbody');\n        clearEl(bodyElement);\n\n        const firstIndex = (this.perPage * this.currentPage);\n        const lastIndex = (firstIndex + this.perPage) > this.totalRecords ? this.totalRecords : (firstIndex + this.perPage);\n\n\n        for (let i = firstIndex; i < lastIndex; i++) {\n            const rowElem = makeEl(this.options.rowCallback(this.data[i]));\n            rowElem.classList.add(i % 2 === 0 ? 'odd' : 'even');\n\n            bodyElement.appendChild(rowElem);\n        }\n\n        this.paginator.update(this.totalRecords, this.perPage, this.currentPage);\n    }\n\n    _updatePage(n) {\n        this.currentPage = n;\n        this.paginator.update(this.totalRecords, this.perPage, this.currentPage);\n        this._updateEntries(this.data);\n    }\n\n    _updateFilter(query) {\n        /* clearing the query */\n        if (query === null || query === '') {\n            this._updateEntries(this.unfilteredData);\n            return;\n        }\n\n        let data = [];\n        for (const datum of this.unfilteredData) {\n            if (this.filterCallback(datum, query)) {\n                data.push(datum);\n            }\n        }\n\n        this._updatePage(0)\n        this._updateEntries(data);\n    }\n\n    _updateSort(field, direction) {\n        this.sortField = field;\n        this.sortDir = direction;\n\n        let newEntries = [...this.data].sort((a, b) => {\n            let sorter = 0;\n\n            if (a[field] > b[field]) {\n                sorter = 1;\n            } else if (a[field] < b[field]) {\n                sorter = -1;\n            }\n\n            if (!direction) {\n                sorter = -sorter;\n            }\n\n            return sorter;\n        });\n\n        this._updatePage(0);\n        this._updateEntries(newEntries);\n    }\n}\n\nconst dumbFilterCallback = (datum, query) => {\n    if (!query) {\n        return true;\n    }\n\n    if (datum.title.indexOf(query) !== -1) {\n        return true;\n    }\n\n    /* this is inefficient */\n    for (const tag of datum.tags) {\n        if (tag.name.toLowerCase() === query.toLowerCase()) {\n            return true;\n        }\n    }\n\n    return false;\n};\n\nexport { DataTable, dumbFilterCallback };\n","import { escape } from \"./dom\";\n\nconst tagsToHtml = (tags) => {\n\n    return tags.map(tagData => {\n        let tagColorClass;\n        if (tagData.name.indexOf('nsfw') !== -1) {\n            tagColorClass = 'is-danger';\n        } else if (tagData.name.indexOf('safe') !== -1) {\n            tagColorClass = 'is-success';\n        } else if (tagData.name.indexOf('/') !== -1) {\n            tagColorClass = 'is-primary';\n        } else {\n            tagColorClass = 'is-info';\n        }\n\n        return `<a href=\"/archive?q=${tagData.slug}\">\n                            <span class=\"tag ${tagColorClass}\">${escape(tagData.name)}</span>\n                        </a>`;\n    }).join('');\n};\n\nexport { tagsToHtml };\n","import { makeEl, escape } from \"./dom\";\n\nclass TagsInput {\n    constructor(element, options = {}) {\n        this.element = element;\n        this.tags = [];\n        this.options = options\n\n        this.maxTags = options.maxTags || 10;\n        this.inputNode = null;\n        this.containerNode = null;\n    }\n\n    attach() {\n        this.element.style.display = 'none';\n\n        this.containerNode = makeEl('<div class=\"tags-input\"></div>');\n        this.inputNode = makeEl('<input class=\"input\" type=\"text\" placeholder=\"10 tags maximum\" value=\"\" />');\n        this.containerNode.appendChild(this.inputNode);\n\n        this.element.parentNode.insertBefore(this.containerNode, this.element.nextSibling);\n\n        /* Load existing tags from input */\n        if (this.element.value) {\n            for (const tag of this.element.value.split(',')) {\n                this.addTag(tag);\n            }\n        }\n\n        /* Handle addition and removal of tags via key-presses */\n        this.containerNode.addEventListener('keydown', this._handleInputKeyUp.bind(this));\n\n        /* Handle deletions by clicking the delete button */\n        this.containerNode.addEventListener('click', this._handleContainerClick.bind(this));\n    }\n\n    detach() {\n        this.tags.clear();\n        this.containerNode.remove();\n        this.element.style.display = 'inline-block';\n    }\n\n    updateHiddenInputValue() {\n        this.element.value = this.tags.join(',');\n    }\n\n    deleteTagNode(node) {\n        this.tags.splice(this.tags.indexOf(node.dataset.value.toLowerCase()), 1);\n        node.remove();\n\n        /* Below the limit? Make sure the input is enabled. */\n        if (this.tags.length < this.maxTags) {\n            this.inputNode.disabled = false;\n        }\n    }\n\n    addTag(tagValue) {\n        tagValue = tagValue.trim();\n\n        /* Tag value is probably not empty and we don't already have the same tag. */\n        if (tagValue !== '' && this.tags.indexOf(tagValue.toLowerCase()) === -1) {\n            this.tags.push(tagValue.toLowerCase());\n\n            this.inputNode.parentNode.insertBefore(\n                makeEl('<span class=\"tag is-info\" data-value=\"' + escape(tagValue) + '\">' + escape(tagValue) + '<span class=\"delete is-small\" /></span>'),\n                this.inputNode\n            );\n\n            /* Too many tags, disable the input for now. */\n            if (this.tags.length >= this.maxTags) {\n                this.inputNode.disabled = true;\n            }\n        }\n    }\n\n    _handleInputKeyUp(evt) {\n        let tagValue = this.inputNode.value;\n\n        if (evt.key === 'Backspace' && tagValue === '') {\n            // Remove the child\n            if (this.inputNode.previousSibling) {\n                this.deleteTagNode(this.inputNode.previousSibling);\n\n                this.updateHiddenInputValue();\n            }\n        } else if (evt.key === ',') {\n            this.addTag(tagValue);\n\n            this.inputNode.value = ''\n            this.updateHiddenInputValue();\n\n            evt.preventDefault();\n        }\n    }\n\n    _handleContainerClick(evt) {\n        if (evt.target && evt.target.classList.contains('delete')) {\n            this.deleteTagNode(evt.target.closest('.tag'));\n            this.updateHiddenInputValue();\n        }\n    }\n}\n\nexport { TagsInput };\n","import { $, $$, toggleEl } from './dom';\nimport { TagsInput } from \"./tag_input\";\n\nconst setupSignupModal = () => {\n    const signupButton = $('[data-target~=\"#signin\"],[data-target~=\"#signup\"]');\n\n    if (signupButton) {\n        signupButton.addEventListener('click', () => {\n            $('.modal').classList.add('is-active');\n        });\n\n        $('.modal-button-close').addEventListener('click', () => {\n            $('.modal').classList.remove('is-active');\n        });\n    }\n}\n\nconst globalSetup = () => {\n    Array.prototype.forEach.call($$('.js-tag-input'), (el) => {\n        new TagsInput(el).attach();\n    });\n\n    setupSignupModal();\n\n    const embedButton = $('.panel-tools .embed-tool');\n\n    if (embedButton){\n        embedButton.addEventListener('click', (evt) => {\n            if (evt.target && evt.target.closest('.panel-tools')) {\n                toggleEl(evt.target.closest('.panel-tools').querySelector('.panel-embed'));\n            }\n        });\n    }\n\n    const expandButton = $('.expand-tool');\n\n    if (expandButton) {\n        expandButton.addEventListener('click', (evt) => {\n            if (evt.target && evt.target.closest('.panel')) {\n                const panel = evt.target.closest('.panel');\n\n                if (panel.classList.contains('panel-fullsize')) {\n                    panel.classList.remove('panel-fullsize');\n                } else {\n                    panel.classList.add('panel-fullsize');\n                }\n            }\n        });\n    }\n\n    // Notifications\n    (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {\n        const $notification = $delete.parentNode;\n\n        $delete.addEventListener('click', () => {\n            $notification.parentNode.removeChild($notification);\n        });\n    });\n\n    // Hamburger menu\n    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);\n    if ($navbarBurgers.length > 0) {\n        $navbarBurgers.forEach(el => {\n            el.addEventListener('click', () => {\n                const target = el.dataset.target;\n                const $target = document.getElementById(target);\n                el.classList.toggle('is-active');\n                $target.classList.toggle('is-active');\n            });\n        });\n    }\n\n    const preloader = $('.preloader');\n    const main = $('main');\n\n    if (preloader && main) {\n        preloader.remove();\n        main.id = '';\n    }\n}\n\nexport { globalSetup };","import { escape, whenReady } from './dom';\nimport { DataTable, dumbFilterCallback } from './data_tables';\nimport { tagsToHtml } from \"./utils\";\nimport { globalSetup } from './main';\n\nconst getUserInfo = () => {\n    const elem = document.getElementById('js-data-holder');\n\n    if (!elem) {\n        return { userId: null, csrfToken: null };\n    }\n\n    return { userId: elem.dataset.userId, csrfToken: elem.dataset.csrfToken };\n};\n\nconst parsePasteInfo = (elem) => {\n    if (!elem.dataset.pasteInfo) {\n        return null;\n    }\n\n    return JSON.parse(elem.dataset.pasteInfo);\n};\n\nwhenReady(() => {\n    globalSetup();\n\n    const urlParams = new URLSearchParams(window.location.search);\n    const myParam = urlParams.get('q');\n    const myPastesElem = document.getElementById('archive');\n    const table = new DataTable(myPastesElem, {\n        ajaxCallback: (resolve) => {\n            resolve({\n                data: Array.prototype.map.call(myPastesElem.querySelectorAll('tbody > tr'), parsePasteInfo)\n            });\n        },\n        rowCallback: (rowData) => {\n            const userData = getUserInfo();\n            const ownedByUser = (parseInt(rowData.user_id) === parseInt(userData.userId));\n\n            const deleteElem = ownedByUser ? `<td class=\"td-center\">\n                                         <form action=\"/${rowData.id}\" method=\"POST\">\n                                            <input type=\"hidden\" name=\"delete\" value=\"delete\" />\n                                            <input type=\"hidden\" name=\"csrf_token\" value=\"${userData.csrfToken}\" />\n                                            <input type=\"submit\" value=\"Delete\" />\n                                         </form>\n                                       </td>` : '';\n            const pasteCreatedAt = new Date(rowData.created_at).toLocaleString();\n            const pasteVisibility = ownedByUser ? `<td class=\"td-center\">${rowData.visibility}</td>` : '';\n\n            return `<tr>\n                        <td><a href=\"/${rowData.id}\">${escape(rowData.title)}</a></td>\n                        <td class=\"td-center\">${pasteCreatedAt}</td>\n                        ${pasteVisibility}\n                        <td class=\"td-center\">${rowData.views || 0}</td>\n                        <td>${tagsToHtml(rowData.tags)}</td>\n                        ${deleteElem}\n                    </tr>`;\n        },\n        filterCallback: dumbFilterCallback,\n        preFilter: myParam\n    });\n    table.attach();\n\n    const myFavesElem = document.getElementById('favs');\n\n    if (!myFavesElem) {\n        return;\n    }\n\n    const faveTable = new DataTable(myFavesElem, {\n        ajaxCallback: (resolve) => {\n            resolve({\n                data: Array.prototype.map.call(myFavesElem.querySelectorAll('tbody > tr'), parsePasteInfo)\n            });\n        },\n        rowCallback: (rowData) => {\n            const recentUpdate = rowData.recently_updated ?\n                `<i class='far fa-check-square fa-lg' aria-hidden='true'></i>` :\n                `<i class='far fa-minus-square fa-lg' aria-hidden='true'></i>`;\n            const pasteFavedAt = new Date(rowData.favourited_at).toLocaleString();\n\n            //                         <td><a href=\"/user/${escape(rowData.author)}\">${escape(rowData.author)}</a></td>\n            return `<tr>\n                        <td><a href=\"/${rowData.id}\">${escape(rowData.title)}</a></td>\n                        <td class=\"td-center\">${pasteFavedAt}</td>\n                        <td class=\"td-center\">${recentUpdate}</td>\n                        <td>${tagsToHtml(rowData.tags)}</td>\n                    </tr>`;\n        },\n        filterCallback: dumbFilterCallback\n    });\n    faveTable.attach();\n});"],"names":["funcp","$","selector","document","querySelector","makeEl","html","template","createElement","innerHTML","trim","content","firstChild","clearEl","el","removeChild","escape","unsafe","replace","SimplePaginator","element","pageCallback","addEventListener","evt","target","classList","contains","dataset","page","totalRecords","perPage","currentPage","this","lastPage","Math","floor","firstPageShow","lastPageShow","showFirstPage","abs","showLastPage","prevButtonDisabled","appendChild","i","selected","nextButtonDisabled","DataTable","options","container","parentElement","ajaxCallback","data","unfilteredData","paginator","filterCallback","sortField","sortDir","filterField","_this","_updateFilter","value","preFilter","perPageField","Number","_updatePage","header","elem","remove","_updateSort","add","attach","bind","_loadEntries","Promise","then","_this2","length","bodyElement","firstIndex","lastIndex","rowElem","rowCallback","update","n","_updateEntries","query","datum","push","field","direction","newEntries","_toConsumableArray","sort","a","b","sorter","dumbFilterCallback","title","indexOf","tags","name","toLowerCase","tagsToHtml","map","tagData","tagColorClass","slug","join","TagsInput","maxTags","inputNode","containerNode","style","display","parentNode","insertBefore","nextSibling","split","tag","addTag","_handleInputKeyUp","_handleContainerClick","clear","node","splice","disabled","tagValue","key","previousSibling","deleteTagNode","updateHiddenInputValue","preventDefault","closest","globalSetup","signupButton","Array","prototype","forEach","call","querySelectorAll","embedButton","expandButton","panel","$delete","$notification","$navbarBurgers","slice","$target","getElementById","toggle","preloader","main","id","parsePasteInfo","pasteInfo","JSON","parse","myParam","URLSearchParams","window","location","search","get","myPastesElem","resolve","rowData","userData","userId","csrfToken","ownedByUser","parseInt","user_id","deleteElem","pasteCreatedAt","Date","created_at","toLocaleString","pasteVisibility","visibility","views","myFavesElem","recentUpdate","recently_updated","pasteFavedAt","favourited_at","readyState"],"mappings":"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"}